<!DOCTYPE html>
<html>

<head>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/socket.io/client-dist/socket.io.min.js"></script>
    <!--<script src="{{ url_for('static', filename='script.js') }}"></script>-->
        <!-- Import axios, which makes HTTP requests in JS a little easier-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"
            integrity="sha512-odNmoc1XJy5x1TMVMdC7EMs3IVdItLPlCeL5vSUPN2llYKMJ2eByTTAIiiuqLg+GdNr9hF6z81p27DArRFKT7A=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons" />
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Ai</title>

</head>

<body>
    <h1>Ai</h1>
        
        <div id = container>
            <ul id="listMessages">


            </ul>


            <div id="input-container">
                <input type="text" id="user_input" placeholder="Enter your message">
                <button id="submit"  class="submit-button">
                    <i class="material-icons">send</i>
                </button>
            </div>

        </div>
        





    
    <script>
        const userInputField = document.getElementById('user_input');
        const submitButton = document.getElementById('submit');

        const responseList = document.getElementById('listMessages'); // Get the list element

            
                    submitButton.addEventListener('click', () => {
                            console.log("clicking")
                            const userInput = userInputField.value;

                            const newUserMessageElement = document.createElement('li');
                            newUserMessageElement.className = 'message_user';
                            newUserMessageElement.textContent = userInput;
       
                            responseList.appendChild(newUserMessageElement)
                            userInputField.value = ""


                            axios.post('/api/datapoint3', { user_input: userInput })
                                .then(response => {
                                    // Do something with the response data
                                    console.log(response.data);

                                    // Create a new list item (li) element
                                    const newAiMessageElement = document.createElement('li');
                                    newAiMessageElement.className = 'message_ai';
                                    newAiMessageElement.textContent = response.data; // Set the text content to response data

                                    // Append the new list item to the existing list
                                    responseList.appendChild(newAiMessageElement);
                                })
                                .catch(error => {
                                    console.error(error);
                                });
                    });


    </script>
</body>

</html>